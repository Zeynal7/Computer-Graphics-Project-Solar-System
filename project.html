<html>

<script id="vertex-shader" type="x-shader/x-vertex">

attribute vec4 v_Norm;
attribute vec4 v_Pos;

uniform vec4 v_Light;
uniform vec4 v_Camera;

uniform mat4 m_Model;
uniform mat4 m_View;
uniform mat4 m_Proj;

varying vec3 o_Norm;
varying vec3 o_Camera;
varying vec3 o_Light;
varying vec3 emission;

attribute vec2 vertTexCoord;
varying vec2 fragTexCoord;

void main() 
{
    mat4 m_ModelView = m_View * m_Model;
    vec4 tmp_Pos = m_ModelView * v_Pos;

    o_Norm = normalize(m_ModelView * v_Norm).xyz;
    o_Light = (m_View * v_Light).xyz;
    o_Camera = normalize(-tmp_Pos).xyz;
    
    // directional light
    if (v_Light.w != 0.0 )
		  o_Light = o_Light - tmp_Pos.xyz;

    fragTexCoord = vertTexCoord;

    gl_Position = m_Proj * tmp_Pos;
} 
</script>

<script id="fragment-shader" type="x-shader/x-fragment">

precision mediump float;

varying vec2 fragTexCoord;
uniform sampler2D sampler;

varying vec3 o_Norm;
varying vec3 o_Camera;
varying vec3 o_Light;

uniform float col_Shininess;
uniform vec3 col_Ambient, col_Diffuse, col_Specular;
uniform vec3 light_Ambient, light_Diffuse, light_Specular;
uniform vec3 light_Emission;

void main()
{
    vec3 N = normalize(o_Norm);
    vec3 E = normalize(o_Camera);
    vec3 L = normalize(o_Light);

    vec3 H = normalize(L + E);   
    vec3 ambient = col_Ambient * light_Ambient;

    float Kd = max(dot(L, N), 0.0);
	vec3 diffuse = Kd * col_Diffuse * light_Diffuse;
    
    float Ks = pow(max(dot(N, H), 0.0), col_Shininess);
	vec3 specular = Ks * col_Specular * light_Specular;
    vec3 emission = light_Emission;
	// discard the specular highlight if the light's behind the vertex
	if (dot(L, N) < 0.0) 
	    specular = vec3(0.0, 0.0, 0.0);
    
    highp vec4 texelColor = texture2D(sampler, fragTexCoord);
    gl_FragColor = vec4(texelColor.rgb * (ambient + diffuse + specular + emission), texelColor.a);

	//gl_FragColor.xyz = ambient + diffuse + specular + emission;
	//gl_FragColor.a = 1.0;
}
</script>

<script type="text/javascript" src="Common/webgl-utils.js"></script>
<script type="text/javascript" src="Common/initShaders.js"></script>
<script type="text/javascript" src="Common/MV.js"></script>
<script type="text/javascript" src="Common/gl-matrix.js"></script>
<script type="text/javascript" src="project.js"></script>
<script type="text/javascript" src="camera.js"></script>
<script type="text/javascript" src="light.js"></script>
<script type="text/javascript" src="3d-object.js"></script>
<script type="text/javascript" src="sphere.js"></script>
<script type="text/javascript" src="triangle.js"></script>
<script type="text/javascript" src="planet-info.js"></script>
<script type="text/javascript" src="navigation.js"></script>
<script type="text/javascript" src="vector-helper.js"></script>


<body>
<canvas id="gl-canvas" tabindex='1' width="900" height="900">
Oops ... your browser doesn't support the HTML5 canvas element
</canvas>

<img id="0" src="Textures/0.jpg" width="0" crossorigin="anonymous"></img>
<img id="1" src="Textures/1.jpg" width="0" crossorigin="anonymous"></img>
<img id="2" src="Textures/2.jpg" width="0" crossorigin="anonymous"></img>
<img id="3" src="Textures/3.jpg" width="0" crossorigin="anonymous"></img>
<img id="4" src="Textures/4.jpg" width="0" crossorigin="anonymous"></img>
<img id="5" src="Textures/5.jpg" width="0" crossorigin="anonymous"></img>
<img id="6" src="Textures/6.jpg" width="0" crossorigin="anonymous"></img>
<img id="7" src="Textures/7.jpg" width="0" crossorigin="anonymous"></img>
<img id="8" src="Textures/8.jpg" width="0" crossorigin="anonymous"></img>
<img id="9" src="Textures/9.jpg" width="0" crossorigin="anonymous"></img>
<img id="10" src="Textures/10.jpg" width="0" crossorigin="anonymous"></img>

   
<br/>

</body>
</html>
